<!-- templates/requirements_index.html -->
{% extends "base.html" %}

{% block content %}
<h1>Welcome to Compliance Tracker!</h1>
<h2>We will help you keep track of the regulations you must meet to get your car approved.</h2>

{#<!-- Upload a NEW document -->#}
<form action="/submissions/form_tracker">
    <button type="create">Upload my Forms NOW!</button>
</form>

{#<!-- User has option to see their ZIP -->#}
<h4>Ready for your ZIP folder?</h4>
<form action="/submission/download_zip" method="GET">
    <input type="submit"/>
</form>
<ol>
{# <!--list all requirements, with a file upload button--> #}
    {% for requirement in requirements %}
    <li>
        <h3>{{ requirement.name }}</h3>
        <h4>{{ requirement.description }}</h4>
        <div class="status">
            <div id="status_category">
            </div>
                {#<!-- Show status in red in green based on value--> #}
                {% if requirement.documents|length >= requirement.num_required %}
                    <div class="green_light">
                        <p>Current Status: FULFILLED</p>
                    </div>
                {% else  %}
                    <div class="red_light">
                        <p>Current Status: UNFULFILLED</p>
                    </div>
                {% endif %}
        </div>
        <p>Required No. of Forms: {{ requirement.num_required }}</p>
        <img src="{{ requirement.image }}"/>
        {#<!-- LIST all DOCUMENTS RELATED to this REQUIREMENT--> #}
        <p>Here are the Documents We Have From You So Far:</p>
        <ol>
            {% for document in documents %}
                {% if document.requirement == requirement.name %}
                    <li>{{ document.file_name }}
                {% endif %}
            {% endfor %}
        </ol>

        <br><br>

    {% endfor %}


{% endblock %}
